## Задание
1. На сервера pg1 и pg2 установить PostgreSQL. Между серверами настроить репликацию данных и архивирование WAL
2. Настроить Keepalived таким образом, чтобы при обращении на VIP можно было попасть на мастер ноду.

## Запуск Ansible Playbook
Две легких команды помогут в этом:

```
vagrant up (поднимаем наши серваки)
```
```
ansible-playbook *название_вашего_сценария*.yml
```

## Важнейший момент, без которого не сработает НИЧЕГО

Итак, после запуска playbook у вас вышла ошибка. Это нормально, так и должно быть!

Решаем по пунктам:
1) Зайдите через ssh на первый сервер
```
vagrant ssh pg1
```

2) Выйдите в root и установите следуюшие модули:

```
sudo yum groupinstall "Development Tools"
sudo yum install python3-devel
sudo yum install postgresql-libs
sudo yum install postgresql-devel
yum install python-psycopg2
```

3) Выйдите из сервера и запустите playbook еще раз. Все установится!

Если вы очень умные, то это можно прописать в playbook :)

## Для решения технических шоколадок
1) Проверяем обязательно, нет ли конфликтов в VirtualBox (похожие задания с прошлого семестра нам мешают). Удаляем все ненужное.
2) Не забудьте поменять имя компьютера в vagrantfile (с mario/gera на sirius (или имя вашего компа)).
3) Можно радикально воспользоваться командой: 
```
vagrant destroy --force
```
!! Если проблемы вознакают на vagrant up. Но обычно все решается с помощью первого пункта. !!

*Во всех остальных случаях приходите жаловаться Никите. Вам обязательно помогут!*

## Что нужно показывать?

1) Показываем, что у нас есть разные файлы (и те, которые мы устанавливали через playbook)

<a href="https://ibb.co/wM41HVq"><img src="https://i.ibb.co/ChQFdgy/1p.jpg" alt="1p" border="0"></a>

2) Создаем БД на 1 сервере и показываем, что ее копия появляется сама на втором:

<a href="https://ibb.co/njWmFyQ"><img src="https://i.ibb.co/BB139JT/2p.jpg" alt="2p" border="0"></a>


## Готово, вы потрясающее!
Загружаем все файлы на GitHub, готовим ReadMe и показываем Никите! Победа!
